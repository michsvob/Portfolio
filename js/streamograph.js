const data_machine = [{date:"20180101", Machine1:0, Machine2:4, Machine3:25, Machine4:38, Machine5:56, Machine6:16},{date:"20180102", Machine1:1, Machine2:37, Machine3:33, Machine4:48, Machine5:79, Machine6:18},{date:"20180103", Machine1:1, Machine2:42, Machine3:41, Machine4:36, Machine5:74, Machine6:21},{date:"20180104", Machine1:4, Machine2:35, Machine3:31, Machine4:38, Machine5:63, Machine6:20},{date:"20180105", Machine1:4, Machine2:19, Machine3:32, Machine4:52, Machine5:56, Machine6:25},{date:"20180106", Machine1:9, Machine2:35, Machine3:33, Machine4:42, Machine5:58, Machine6:42},{date:"20180107", Machine1:9, Machine2:40, Machine3:39, Machine4:35, Machine5:47, Machine6:29},{date:"20180108", Machine1:16, Machine2:34, Machine3:34, Machine4:40, Machine5:73, Machine6:28},{date:"20180109", Machine1:16, Machine2:48, Machine3:35, Machine4:29, Machine5:50, Machine6:39},{date:"20180110", Machine1:25, Machine2:27, Machine3:34, Machine4:48, Machine5:57, Machine6:25},{date:"20180111", Machine1:25, Machine2:50, Machine3:34, Machine4:39, Machine5:61, Machine6:40},{date:"20180112", Machine1:36, Machine2:39, Machine3:37, Machine4:33, Machine5:60, Machine6:28},{date:"20180113", Machine1:36, Machine2:22, Machine3:33, Machine4:43, Machine5:60, Machine6:40},{date:"20180114", Machine1:36, Machine2:22, Machine3:33, Machine4:41, Machine5:73, Machine6:26},{date:"20180115", Machine1:49, Machine2:36, Machine3:30, Machine4:42, Machine5:58, Machine6:39},{date:"20180116", Machine1:49, Machine2:14, Machine3:28, Machine4:37, Machine5:63, Machine6:52},{date:"20180117", Machine1:64, Machine2:26, Machine3:20, Machine4:46, Machine5:63, Machine6:41},{date:"20180118", Machine1:64, Machine2:29, Machine3:32, Machine4:38, Machine5:56, Machine6:38},{date:"20180119", Machine1:64, Machine2:27, Machine3:32, Machine4:51, Machine5:48, Machine6:26},{date:"20180120", Machine1:64, Machine2:26, Machine3:29, Machine4:51, Machine5:60, Machine6:45},{date:"20180121", Machine1:81, Machine2:43, Machine3:39, Machine4:33, Machine5:59, Machine6:27},{date:"20180122", Machine1:81, Machine2:25, Machine3:29, Machine4:44, Machine5:53, Machine6:28},{date:"20180123", Machine1:81, Machine2:15, Machine3:31, Machine4:46, Machine5:60, Machine6:43},{date:"20180124", Machine1:81, Machine2:26, Machine3:34, Machine4:37, Machine5:57, Machine6:59},{date:"20180125", Machine1:81, Machine2:47, Machine3:36, Machine4:44, Machine5:57, Machine6:85},{date:"20180126", Machine1:100, Machine2:14, Machine3:36, Machine4:36, Machine5:47, Machine6:31},{date:"20180127", Machine1:100, Machine2:51, Machine3:33, Machine4:40, Machine5:74, Machine6:36},{date:"20180128", Machine1:100, Machine2:24, Machine3:38, Machine4:39, Machine5:66, Machine6:42},{date:"20180129", Machine1:100, Machine2:24, Machine3:25, Machine4:47, Machine5:54, Machine6:22},{date:"20180130", Machine1:100, Machine2:30, Machine3:33, Machine4:48, Machine5:66, Machine6:55},{date:"20180131", Machine1:100, Machine2:37, Machine3:37, Machine4:48, Machine5:64, Machine6:61},{date:"20180201", Machine1:100, Machine2:32, Machine3:38, Machine4:42, Machine5:59, Machine6:57},{date:"20180202", Machine1:100, Machine2:35, Machine3:32, Machine4:43, Machine5:62, Machine6:52},{date:"20180203", Machine1:100, Machine2:50, Machine3:34, Machine4:50, Machine5:58, Machine6:64},{date:"20180204", Machine1:100, Machine2:48, Machine3:33, Machine4:37, Machine5:49, Machine6:65},{date:"20180205", Machine1:100, Machine2:44, Machine3:35, Machine4:43, Machine5:58, Machine6:54},{date:"20180206", Machine1:100, Machine2:29, Machine3:35, Machine4:36, Machine5:62, Machine6:49},{date:"20180207", Machine1:81, Machine2:35, Machine3:23, Machine4:44, Machine5:66, Machine6:43},{date:"20180208", Machine1:81, Machine2:19, Machine3:34, Machine4:37, Machine5:59, Machine6:81},{date:"20180209", Machine1:81, Machine2:35, Machine3:33, Machine4:41, Machine5:65, Machine6:51},{date:"20180210", Machine1:81, Machine2:28, Machine3:36, Machine4:37, Machine5:70, Machine6:64},{date:"20180211", Machine1:81, Machine2:15, Machine3:32, Machine4:39, Machine5:53, Machine6:84},{date:"20180212", Machine1:64, Machine2:24, Machine3:25, Machine4:35, Machine5:52, Machine6:39},{date:"20180213", Machine1:64, Machine2:47, Machine3:37, Machine4:41, Machine5:64, Machine6:73},{date:"20180214", Machine1:64, Machine2:30, Machine3:33, Machine4:40, Machine5:63, Machine6:107},{date:"20180215", Machine1:49, Machine2:26, Machine3:31, Machine4:43, Machine5:68, Machine6:61},{date:"20180216", Machine1:49, Machine2:37, Machine3:30, Machine4:43, Machine5:52, Machine6:55},{date:"20180217", Machine1:49, Machine2:40, Machine3:38, Machine4:44, Machine5:59, Machine6:55},{date:"20180218", Machine1:36, Machine2:27, Machine3:35, Machine4:42, Machine5:60, Machine6:70},{date:"20180219", Machine1:36, Machine2:38, Machine3:38, Machine4:39, Machine5:60, Machine6:57},{date:"20180220", Machine1:36, Machine2:51, Machine3:30, Machine4:47, Machine5:64, Machine6:36},{date:"20180221", Machine1:25, Machine2:26, Machine3:33, Machine4:43, Machine5:65, Machine6:79},{date:"20180222", Machine1:25, Machine2:39, Machine3:37, Machine4:34, Machine5:52, Machine6:58},{date:"20180223", Machine1:16, Machine2:14, Machine3:37, Machine4:36, Machine5:53, Machine6:59},{date:"20180224", Machine1:16, Machine2:38, Machine3:40, Machine4:44, Machine5:62, Machine6:82},{date:"20180225", Machine1:9, Machine2:18, Machine3:34, Machine4:30, Machine5:58, Machine6:22},{date:"20180226", Machine1:9, Machine2:38, Machine3:35, Machine4:41, Machine5:58, Machine6:83},{date:"20180227", Machine1:4, Machine2:42, Machine3:37, Machine4:38, Machine5:54, Machine6:84},{date:"20180228", Machine1:4, Machine2:35, Machine3:37, Machine4:41, Machine5:63, Machine6:84},{date:"20180301", Machine1:1, Machine2:28, Machine3:28, Machine4:38, Machine5:48, Machine6:101},{date:"20180302", Machine1:1, Machine2:42, Machine3:33, Machine4:42, Machine5:62, Machine6:78},{date:"20180303", Machine1:0, Machine2:39, Machine3:36, Machine4:36, Machine5:58, Machine6:102},{date:"20180304", Machine1:0, Machine2:42, Machine3:36, Machine4:37, Machine5:65, Machine6:71},{date:"20180305", Machine1:1, Machine2:25, Machine3:32, Machine4:44, Machine5:53, Machine6:88},{date:"20180306", Machine1:1, Machine2:31, Machine3:37, Machine4:47, Machine5:56, Machine6:73},{date:"20180307", Machine1:4, Machine2:52, Machine3:38, Machine4:48, Machine5:65, Machine6:81},{date:"20180308", Machine1:4, Machine2:10, Machine3:29, Machine4:38, Machine5:57, Machine6:74},{date:"20180309", Machine1:9, Machine2:39, Machine3:39, Machine4:36, Machine5:58, Machine6:74},{date:"20180310", Machine1:9, Machine2:18, Machine3:33, Machine4:44, Machine5:59, Machine6:91},{date:"20180311", Machine1:16, Machine2:35, Machine3:37, Machine4:39, Machine5:53, Machine6:84},{date:"20180312", Machine1:16, Machine2:40, Machine3:37, Machine4:32, Machine5:68, Machine6:135},{date:"20180313", Machine1:16, Machine2:45, Machine3:38, Machine4:43, Machine5:48, Machine6:119},{date:"20180314", Machine1:25, Machine2:34, Machine3:28, Machine4:45, Machine5:59, Machine6:43},{date:"20180315", Machine1:25, Machine2:25, Machine3:34, Machine4:44, Machine5:67, Machine6:69},{date:"20180316", Machine1:36, Machine2:39, Machine3:26, Machine4:39, Machine5:62, Machine6:69},{date:"20180317", Machine1:36, Machine2:7, Machine3:29, Machine4:41, Machine5:65, Machine6:70},{date:"20180318", Machine1:49, Machine2:23, Machine3:35, Machine4:36, Machine5:67, Machine6:26},{date:"20180319", Machine1:49, Machine2:31, Machine3:35, Machine4:47, Machine5:64, Machine6:71},{date:"20180320", Machine1:49, Machine2:32, Machine3:37, Machine4:42, Machine5:60, Machine6:71},{date:"20180321", Machine1:64, Machine2:43, Machine3:34, Machine4:41, Machine5:68, Machine6:98},{date:"20180322", Machine1:64, Machine2:0, Machine3:34, Machine4:40, Machine5:62, Machine6:99},{date:"20180323", Machine1:64, Machine2:30, Machine3:37, Machine4:32, Machine5:65, Machine6:100},{date:"20180324", Machine1:64, Machine2:29, Machine3:36, Machine4:41, Machine5:58, Machine6:55},{date:"20180325", Machine1:81, Machine2:44, Machine3:34, Machine4:38, Machine5:49, Machine6:92},{date:"20180326", Machine1:81, Machine2:34, Machine3:35, Machine4:38, Machine5:66, Machine6:74},{date:"20180327", Machine1:81, Machine2:26, Machine3:32, Machine4:40, Machine5:67, Machine6:65},{date:"20180328", Machine1:81, Machine2:28, Machine3:30, Machine4:36, Machine5:75, Machine6:84},{date:"20180329", Machine1:100, Machine2:26, Machine3:29, Machine4:40, Machine5:73, Machine6:38},{date:"20180330", Machine1:100, Machine2:31, Machine3:26, Machine4:31, Machine5:60, Machine6:123},{date:"20180331", Machine1:100, Machine2:35, Machine3:30, Machine4:50, Machine5:68, Machine6:76},{date:"20180401", Machine1:100, Machine2:19, Machine3:38, Machine4:40, Machine5:44, Machine6:105},{date:"20180402", Machine1:100, Machine2:40, Machine3:26, Machine4:40, Machine5:58, Machine6:125},{date:"20180403", Machine1:100, Machine2:37, Machine3:31, Machine4:35, Machine5:54, Machine6:29},{date:"20180404", Machine1:100, Machine2:30, Machine3:34, Machine4:36, Machine5:55, Machine6:126},{date:"20180405", Machine1:100, Machine2:53, Machine3:40, Machine4:40, Machine5:63, Machine6:107},{date:"20180406", Machine1:100, Machine2:24, Machine3:30, Machine4:35, Machine5:76, Machine6:88},{date:"20180407", Machine1:100, Machine2:33, Machine3:33, Machine4:31, Machine5:58, Machine6:79},{date:"20180408", Machine1:100, Machine2:20, Machine3:39, Machine4:38, Machine5:63, Machine6:129},{date:"20180409", Machine1:100, Machine2:35, Machine3:31, Machine4:42, Machine5:65, Machine6:139},{date:"20180410", Machine1:100, Machine2:24, Machine3:26, Machine4:40, Machine5:58, Machine6:60},{date:"20180411", Machine1:81, Machine2:20, Machine3:38, Machine4:42, Machine5:55, Machine6:40},{date:"20180412", Machine1:81, Machine2:42, Machine3:34, Machine4:36, Machine5:55, Machine6:141},{date:"20180413", Machine1:81, Machine2:24, Machine3:31, Machine4:45, Machine5:70, Machine6:91},{date:"20180414", Machine1:81, Machine2:20, Machine3:36, Machine4:43, Machine5:71, Machine6:112},{date:"20180415", Machine1:81, Machine2:12, Machine3:30, Machine4:41, Machine5:51, Machine6:123},{date:"20180416", Machine1:64, Machine2:25, Machine3:34, Machine4:43, Machine5:61, Machine6:72},{date:"20180417", Machine1:64, Machine2:41, Machine3:35, Machine4:33, Machine5:65, Machine6:83},{date:"20180418", Machine1:64, Machine2:45, Machine3:29, Machine4:46, Machine5:47, Machine6:135},{date:"20180419", Machine1:49, Machine2:43, Machine3:35, Machine4:40, Machine5:71, Machine6:84},{date:"20180420", Machine1:49, Machine2:48, Machine3:34, Machine4:46, Machine5:58, Machine6:105},{date:"20180421", Machine1:49, Machine2:51, Machine3:37, Machine4:44, Machine5:57, Machine6:84},{date:"20180422", Machine1:36, Machine2:17, Machine3:34, Machine4:41, Machine5:60, Machine6:95},{date:"20180423", Machine1:36, Machine2:38, Machine3:34, Machine4:45, Machine5:54, Machine6:96},{date:"20180424", Machine1:36, Machine2:13, Machine3:34, Machine4:43, Machine5:49, Machine6:32},{date:"20180425", Machine1:25, Machine2:33, Machine3:37, Machine4:41, Machine5:55, Machine6:107},{date:"20180426", Machine1:25, Machine2:14, Machine3:38, Machine4:42, Machine5:66, Machine6:129},{date:"20180427", Machine1:16, Machine2:42, Machine3:39, Machine4:40, Machine5:71, Machine6:108},{date:"20180428", Machine1:16, Machine2:34, Machine3:27, Machine4:51, Machine5:60, Machine6:98},{date:"20180429", Machine1:9, Machine2:20, Machine3:38, Machine4:37, Machine5:60, Machine6:164},{date:"20180430", Machine1:9, Machine2:50, Machine3:37, Machine4:43, Machine5:53, Machine6:175},{date:"20180501", Machine1:4, Machine2:39, Machine3:34, Machine4:35, Machine5:61, Machine6:77},{date:"20180502", Machine1:4, Machine2:4, Machine3:34, Machine4:36, Machine5:47, Machine6:110},{date:"20180503", Machine1:1, Machine2:35, Machine3:30, Machine4:40, Machine5:56, Machine6:100},{date:"20180504", Machine1:1, Machine2:27, Machine3:35, Machine4:37, Machine5:62, Machine6:111},{date:"20180505", Machine1:0, Machine2:29, Machine3:30, Machine4:38, Machine5:50, Machine6:112},{date:"20180506", Machine1:0, Machine2:36, Machine3:29, Machine4:35, Machine5:66, Machine6:90},{date:"20180507", Machine1:1, Machine2:26, Machine3:38, Machine4:37, Machine5:76, Machine6:192},{date:"20180508", Machine1:1, Machine2:42, Machine3:31, Machine4:39, Machine5:49, Machine6:102},{date:"20180509", Machine1:4, Machine2:21, Machine3:37, Machine4:43, Machine5:62, Machine6:216},{date:"20180510", Machine1:4, Machine2:23, Machine3:32, Machine4:43, Machine5:66, Machine6:182},{date:"20180511", Machine1:9, Machine2:16, Machine3:35, Machine4:38, Machine5:65, Machine6:114},{date:"20180512", Machine1:9, Machine2:37, Machine3:30, Machine4:45, Machine5:69, Machine6:115},{date:"20180513", Machine1:16, Machine2:27, Machine3:34, Machine4:40, Machine5:71, Machine6:138},{date:"20180514", Machine1:16, Machine2:20, Machine3:27, Machine4:38, Machine5:72, Machine6:69},{date:"20180515", Machine1:25, Machine2:36, Machine3:35, Machine4:49, Machine5:78, Machine6:128},{date:"20180516", Machine1:25, Machine2:36, Machine3:31, Machine4:40, Machine5:58, Machine6:70},{date:"20180517", Machine1:25, Machine2:27, Machine3:34, Machine4:43, Machine5:63, Machine6:140},{date:"20180518", Machine1:36, Machine2:43, Machine3:23, Machine4:42, Machine5:68, Machine6:94},{date:"20180519", Machine1:36, Machine2:43, Machine3:37, Machine4:41, Machine5:65, Machine6:83},{date:"20180520", Machine1:49, Machine2:19, Machine3:32, Machine4:47, Machine5:57, Machine6:83},{date:"20180521", Machine1:49, Machine2:25, Machine3:39, Machine4:36, Machine5:67, Machine6:95},{date:"20180522", Machine1:49, Machine2:31, Machine3:25, Machine4:30, Machine5:56, Machine6:95},{date:"20180523", Machine1:64, Machine2:23, Machine3:31, Machine4:35, Machine5:61, Machine6:120},{date:"20180524", Machine1:64, Machine2:28, Machine3:31, Machine4:44, Machine5:66, Machine6:168},{date:"20180525", Machine1:64, Machine2:33, Machine3:35, Machine4:34, Machine5:51, Machine6:84},{date:"20180526", Machine1:81, Machine2:14, Machine3:34, Machine4:45, Machine5:65, Machine6:85},{date:"20180527", Machine1:81, Machine2:24, Machine3:31, Machine4:45, Machine5:64, Machine6:121},{date:"20180528", Machine1:81, Machine2:20, Machine3:34, Machine4:30, Machine5:48, Machine6:109},{date:"20180529", Machine1:81, Machine2:29, Machine3:34, Machine4:46, Machine5:56, Machine6:122},{date:"20180530", Machine1:81, Machine2:25, Machine3:32, Machine4:40, Machine5:58, Machine6:73},{date:"20180531", Machine1:100, Machine2:31, Machine3:37, Machine4:41, Machine5:56, Machine6:98},{date:"20180601", Machine1:100, Machine2:37, Machine3:35, Machine4:29, Machine5:64, Machine6:99},{date:"20180602", Machine1:100, Machine2:20, Machine3:28, Machine4:33, Machine5:73, Machine6:74},{date:"20180603", Machine1:100, Machine2:5, Machine3:34, Machine4:45, Machine5:51, Machine6:87},{date:"20180604", Machine1:100, Machine2:42, Machine3:37, Machine4:39, Machine5:64, Machine6:149},{date:"20180605", Machine1:100, Machine2:36, Machine3:31, Machine4:41, Machine5:65, Machine6:87},{date:"20180606", Machine1:100, Machine2:28, Machine3:36, Machine4:39, Machine5:52, Machine6:200},{date:"20180607", Machine1:100, Machine2:24, Machine3:36, Machine4:45, Machine5:69, Machine6:75},{date:"20180608", Machine1:100, Machine2:28, Machine3:31, Machine4:37, Machine5:59, Machine6:139},{date:"20180609", Machine1:100, Machine2:11, Machine3:34, Machine4:36, Machine5:62, Machine6:164},{date:"20180610", Machine1:100, Machine2:24, Machine3:37, Machine4:41, Machine5:60, Machine6:140},{date:"20180611", Machine1:100, Machine2:25, Machine3:34, Machine4:41, Machine5:61, Machine6:76},{date:"20180612", Machine1:100, Machine2:17, Machine3:34, Machine4:36, Machine5:52, Machine6:102},{date:"20180613", Machine1:81, Machine2:39, Machine3:34, Machine4:44, Machine5:53, Machine6:128},{date:"20180614", Machine1:81, Machine2:35, Machine3:28, Machine4:45, Machine5:61, Machine6:154},{date:"20180615", Machine1:81, Machine2:38, Machine3:34, Machine4:43, Machine5:65, Machine6:142},{date:"20180616", Machine1:81, Machine2:29, Machine3:35, Machine4:31, Machine5:68, Machine6:129},{date:"20180617", Machine1:81, Machine2:38, Machine3:37, Machine4:42, Machine5:62, Machine6:156},{date:"20180618", Machine1:64, Machine2:48, Machine3:29, Machine4:34, Machine5:62, Machine6:143},{date:"20180619", Machine1:64, Machine2:35, Machine3:30, Machine4:41, Machine5:66, Machine6:78},{date:"20180620", Machine1:64, Machine2:36, Machine3:35, Machine4:46, Machine5:77, Machine6:92},{date:"20180621", Machine1:49, Machine2:34, Machine3:37, Machine4:40, Machine5:64, Machine6:105},{date:"20180622", Machine1:49, Machine2:1, Machine3:28, Machine4:48, Machine5:45, Machine6:132},{date:"20180623", Machine1:49, Machine2:41, Machine3:30, Machine4:36, Machine5:56, Machine6:171},{date:"20180624", Machine1:36, Machine2:44, Machine3:11, Machine4:39, Machine5:62, Machine6:159},{date:"20180625", Machine1:36, Machine2:28, Machine3:32, Machine4:31, Machine5:61, Machine6:80},{date:"20180626", Machine1:25, Machine2:30, Machine3:31, Machine4:34, Machine5:55, Machine6:80},{date:"20180627", Machine1:25, Machine2:22, Machine3:37, Machine4:42, Machine5:53, Machine6:147},{date:"20180628", Machine1:25, Machine2:43, Machine3:36, Machine4:44, Machine5:76, Machine6:147},{date:"20180629", Machine1:16, Machine2:27, Machine3:30, Machine4:41, Machine5:71, Machine6:121},{date:"20180630", Machine1:16, Machine2:1, Machine3:29, Machine4:37, Machine5:60, Machine6:148},{date:"20180701", Machine1:9, Machine2:42, Machine3:36, Machine4:50, Machine5:44, Machine6:67},{date:"20180702", Machine1:9, Machine2:30, Machine3:39, Machine4:40, Machine5:63, Machine6:54},{date:"20180703", Machine1:4, Machine2:23, Machine3:34, Machine4:34, Machine5:73, Machine6:122},{date:"20180704", Machine1:4, Machine2:33, Machine3:34, Machine4:45, Machine5:74, Machine6:122},{date:"20180705", Machine1:1, Machine2:19, Machine3:36, Machine4:39, Machine5:55, Machine6:82},{date:"20180706", Machine1:1, Machine2:37, Machine3:35, Machine4:42, Machine5:70, Machine6:137},{date:"20180707", Machine1:0, Machine2:8, Machine3:34, Machine4:39, Machine5:73, Machine6:82},{date:"20180708", Machine1:0, Machine2:17, Machine3:38, Machine4:38, Machine5:62, Machine6:179},{date:"20180709", Machine1:1, Machine2:31, Machine3:38, Machine4:39, Machine5:57, Machine6:152},{date:"20180710", Machine1:1, Machine2:28, Machine3:32, Machine4:44, Machine5:63, Machine6:221},{date:"20180711", Machine1:4, Machine2:28, Machine3:32, Machine4:34, Machine5:78, Machine6:194},{date:"20180712", Machine1:4, Machine2:39, Machine3:29, Machine4:36, Machine5:54, Machine6:83},{date:"20180713", Machine1:9, Machine2:29, Machine3:34, Machine4:47, Machine5:61, Machine6:181},{date:"20180714", Machine1:9, Machine2:1, Machine3:35, Machine4:39, Machine5:60, Machine6:98},{date:"20180715", Machine1:16, Machine2:36, Machine3:36, Machine4:43, Machine5:60, Machine6:84},{date:"20180716", Machine1:16, Machine2:18, Machine3:40, Machine4:44, Machine5:61, Machine6:98},{date:"20180717", Machine1:25, Machine2:13, Machine3:35, Machine4:42, Machine5:59, Machine6:169},{date:"20180718", Machine1:25, Machine2:27, Machine3:29, Machine4:41, Machine5:67, Machine6:99},{date:"20180719", Machine1:25, Machine2:12, Machine3:31, Machine4:41, Machine5:59, Machine6:99},{date:"20180720", Machine1:36, Machine2:28, Machine3:40, Machine4:41, Machine5:70, Machine6:142},{date:"20180721", Machine1:36, Machine2:25, Machine3:33, Machine4:40, Machine5:59, Machine6:227},{date:"20180722", Machine1:49, Machine2:44, Machine3:38, Machine4:48, Machine5:69, Machine6:100},{date:"20180723", Machine1:49, Machine2:58, Machine3:34, Machine4:33, Machine5:66, Machine6:114},{date:"20180724", Machine1:49, Machine2:38, Machine3:37, Machine4:41, Machine5:57, Machine6:143},{date:"20180725", Machine1:64, Machine2:41, Machine3:32, Machine4:30, Machine5:66, Machine6:258},{date:"20180726", Machine1:64, Machine2:33, Machine3:32, Machine4:41, Machine5:53, Machine6:129},{date:"20180727", Machine1:64, Machine2:36, Machine3:34, Machine4:39, Machine5:50, Machine6:173},{date:"20180728", Machine1:81, Machine2:34, Machine3:32, Machine4:47, Machine5:69, Machine6:159},{date:"20180729", Machine1:81, Machine2:18, Machine3:37, Machine4:29, Machine5:62, Machine6:87},{date:"20180730", Machine1:81, Machine2:37, Machine3:24, Machine4:37, Machine5:49, Machine6:102},{date:"20180731", Machine1:81, Machine2:52, Machine3:32, Machine4:41, Machine5:68, Machine6:73},{date:"20180801", Machine1:81, Machine2:23, Machine3:38, Machine4:50, Machine5:63, Machine6:161},{date:"20180802", Machine1:100, Machine2:36, Machine3:33, Machine4:41, Machine5:76, Machine6:161},{date:"20180803", Machine1:100, Machine2:30, Machine3:33, Machine4:40, Machine5:61, Machine6:161},{date:"20180804", Machine1:100, Machine2:23, Machine3:35, Machine4:35, Machine5:64, Machine6:118},{date:"20180805", Machine1:100, Machine2:28, Machine3:28, Machine4:40, Machine5:61, Machine6:147},{date:"20180806", Machine1:100, Machine2:24, Machine3:35, Machine4:36, Machine5:54, Machine6:192},{date:"20180807", Machine1:100, Machine2:23, Machine3:33, Machine4:43, Machine5:66, Machine6:148},{date:"20180808", Machine1:100, Machine2:25, Machine3:30, Machine4:33, Machine5:67, Machine6:89},{date:"20180809", Machine1:100, Machine2:31, Machine3:35, Machine4:37, Machine5:60, Machine6:134},{date:"20180810", Machine1:100, Machine2:34, Machine3:31, Machine4:36, Machine5:51, Machine6:104},{date:"20180811", Machine1:100, Machine2:21, Machine3:30, Machine4:31, Machine5:66, Machine6:149},{date:"20180812", Machine1:100, Machine2:24, Machine3:40, Machine4:47, Machine5:61, Machine6:195},{date:"20180813", Machine1:100, Machine2:27, Machine3:35, Machine4:36, Machine5:59, Machine6:180},{date:"20180814", Machine1:100, Machine2:34, Machine3:40, Machine4:43, Machine5:58, Machine6:105},{date:"20180815", Machine1:81, Machine2:29, Machine3:37, Machine4:35, Machine5:58, Machine6:166},{date:"20180816", Machine1:81, Machine2:28, Machine3:35, Machine4:39, Machine5:66, Machine6:196},{date:"20180817", Machine1:81, Machine2:26, Machine3:36, Machine4:37, Machine5:68, Machine6:91},{date:"20180818", Machine1:81, Machine2:42, Machine3:36, Machine4:42, Machine5:58, Machine6:106},{date:"20180819", Machine1:81, Machine2:35, Machine3:30, Machine4:37, Machine5:65, Machine6:137},{date:"20180820", Machine1:64, Machine2:26, Machine3:32, Machine4:41, Machine5:59, Machine6:152},{date:"20180821", Machine1:64, Machine2:49, Machine3:34, Machine4:47, Machine5:65, Machine6:122},{date:"20180822", Machine1:64, Machine2:38, Machine3:38, Machine4:37, Machine5:46, Machine6:260},{date:"20180823", Machine1:49, Machine2:8, Machine3:36, Machine4:38, Machine5:59, Machine6:153},{date:"20180824", Machine1:49, Machine2:26, Machine3:25, Machine4:43, Machine5:72, Machine6:138},{date:"20180825", Machine1:49, Machine2:30, Machine3:35, Machine4:43, Machine5:57, Machine6:92},{date:"20180826", Machine1:36, Machine2:38, Machine3:34, Machine4:35, Machine5:64, Machine6:216},{date:"20180827", Machine1:36, Machine2:36, Machine3:32, Machine4:41, Machine5:51, Machine6:93},{date:"20180828", Machine1:25, Machine2:33, Machine3:37, Machine4:35, Machine5:64, Machine6:77},{date:"20180829", Machine1:25, Machine2:21, Machine3:32, Machine4:35, Machine5:63, Machine6:248},{date:"20180830", Machine1:16, Machine2:35, Machine3:37, Machine4:41, Machine5:58, Machine6:93},{date:"20180831", Machine1:16, Machine2:21, Machine3:38, Machine4:35, Machine5:60, Machine6:156},{date:"20180901", Machine1:16, Machine2:21, Machine3:40, Machine4:36, Machine5:57, Machine6:172},{date:"20180902", Machine1:9, Machine2:44, Machine3:35, Machine4:39, Machine5:56, Machine6:141},{date:"20180903", Machine1:9, Machine2:23, Machine3:33, Machine4:44, Machine5:59, Machine6:157},{date:"20180904", Machine1:4, Machine2:38, Machine3:35, Machine4:32, Machine5:55, Machine6:157},{date:"20180905", Machine1:4, Machine2:38, Machine3:34, Machine4:46, Machine5:59, Machine6:157},{date:"20180906", Machine1:1, Machine2:13, Machine3:37, Machine4:37, Machine5:55, Machine6:142},{date:"20180907", Machine1:1, Machine2:49, Machine3:36, Machine4:39, Machine5:56, Machine6:174},{date:"20180908", Machine1:0, Machine2:25, Machine3:29, Machine4:40, Machine5:46, Machine6:143},{date:"20180909", Machine1:0, Machine2:35, Machine3:31, Machine4:35, Machine5:50, Machine6:127},{date:"20180910", Machine1:1, Machine2:27, Machine3:38, Machine4:45, Machine5:68, Machine6:191},{date:"20180911", Machine1:1, Machine2:33, Machine3:36, Machine4:31, Machine5:62, Machine6:127},{date:"20180912", Machine1:4, Machine2:20, Machine3:30, Machine4:41, Machine5:65, Machine6:176},{date:"20180913", Machine1:4, Machine2:3, Machine3:32, Machine4:38, Machine5:48, Machine6:48},{date:"20180914", Machine1:9, Machine2:37, Machine3:35, Machine4:40, Machine5:60, Machine6:176},{date:"20180915", Machine1:9, Machine2:14, Machine3:35, Machine4:33, Machine5:64, Machine6:96},{date:"20180916", Machine1:16, Machine2:39, Machine3:29, Machine4:41, Machine5:62, Machine6:145},{date:"20180917", Machine1:16, Machine2:39, Machine3:38, Machine4:31, Machine5:68, Machine6:161},{date:"20180918", Machine1:25, Machine2:17, Machine3:36, Machine4:30, Machine5:57, Machine6:145},{date:"20180919", Machine1:25, Machine2:19, Machine3:35, Machine4:51, Machine5:50, Machine6:162},{date:"20180920", Machine1:36, Machine2:31, Machine3:31, Machine4:39, Machine5:57, Machine6:97},{date:"20180921", Machine1:36, Machine2:16, Machine3:34, Machine4:47, Machine5:65, Machine6:97},{date:"20180922", Machine1:36, Machine2:27, Machine3:36, Machine4:41, Machine5:67, Machine6:147},{date:"20180923", Machine1:49, Machine2:41, Machine3:35, Machine4:50, Machine5:63, Machine6:163},{date:"20180924", Machine1:49, Machine2:38, Machine3:35, Machine4:36, Machine5:48, Machine6:131},{date:"20180925", Machine1:49, Machine2:42, Machine3:33, Machine4:39, Machine5:55, Machine6:131},{date:"20180926", Machine1:64, Machine2:30, Machine3:38, Machine4:37, Machine5:55, Machine6:213},{date:"20180927", Machine1:64, Machine2:36, Machine3:38, Machine4:35, Machine5:57, Machine6:214},{date:"20180928", Machine1:64, Machine2:25, Machine3:38, Machine4:40, Machine5:62, Machine6:263},{date:"20180929", Machine1:81, Machine2:39, Machine3:29, Machine4:37, Machine5:51, Machine6:165},{date:"20180930", Machine1:81, Machine2:40, Machine3:35, Machine4:35, Machine5:59, Machine6:264},{date:"20181001", Machine1:81, Machine2:21, Machine3:32, Machine4:36, Machine5:75, Machine6:199},{date:"20181002", Machine1:81, Machine2:45, Machine3:30, Machine4:40, Machine5:69, Machine6:133},{date:"20181003", Machine1:81, Machine2:31, Machine3:34, Machine4:47, Machine5:70, Machine6:150},{date:"20181004", Machine1:100, Machine2:37, Machine3:38, Machine4:46, Machine5:63, Machine6:83},{date:"20181005", Machine1:100, Machine2:35, Machine3:36, Machine4:42, Machine5:41, Machine6:317},{date:"20181006", Machine1:100, Machine2:18, Machine3:36, Machine4:41, Machine5:52, Machine6:117},{date:"20181007", Machine1:100, Machine2:30, Machine3:34, Machine4:39, Machine5:58, Machine6:218},{date:"20181008", Machine1:100, Machine2:51, Machine3:36, Machine4:43, Machine5:63, Machine6:184},{date:"20181009", Machine1:100, Machine2:29, Machine3:37, Machine4:48, Machine5:63, Machine6:134},{date:"20181010", Machine1:100, Machine2:33, Machine3:34, Machine4:48, Machine5:53, Machine6:168},{date:"20181011", Machine1:100, Machine2:16, Machine3:24, Machine4:35, Machine5:64, Machine6:219},{date:"20181012", Machine1:100, Machine2:40, Machine3:38, Machine4:39, Machine5:64, Machine6:219},{date:"20181013", Machine1:100, Machine2:54, Machine3:27, Machine4:39, Machine5:75, Machine6:101},{date:"20181014", Machine1:100, Machine2:24, Machine3:32, Machine4:44, Machine5:56, Machine6:203},{date:"20181015", Machine1:100, Machine2:44, Machine3:38, Machine4:48, Machine5:52, Machine6:170},{date:"20181016", Machine1:100, Machine2:20, Machine3:35, Machine4:35, Machine5:62, Machine6:204},{date:"20181017", Machine1:81, Machine2:17, Machine3:38, Machine4:45, Machine5:63, Machine6:102},{date:"20181018", Machine1:81, Machine2:46, Machine3:33, Machine4:50, Machine5:55, Machine6:154},{date:"20181019", Machine1:81, Machine2:47, Machine3:37, Machine4:46, Machine5:55, Machine6:205},{date:"20181020", Machine1:81, Machine2:35, Machine3:38, Machine4:36, Machine5:48, Machine6:171},{date:"20181021", Machine1:64, Machine2:8, Machine3:32, Machine4:39, Machine5:50, Machine6:189},{date:"20181022", Machine1:64, Machine2:32, Machine3:29, Machine4:44, Machine5:47, Machine6:172},{date:"20181023", Machine1:64, Machine2:30, Machine3:39, Machine4:40, Machine5:56, Machine6:189},{date:"20181024", Machine1:64, Machine2:31, Machine3:35, Machine4:35, Machine5:58, Machine6:86},{date:"20181025", Machine1:49, Machine2:31, Machine3:34, Machine4:28, Machine5:67, Machine6:86},{date:"20181026", Machine1:49, Machine2:48, Machine3:31, Machine4:38, Machine5:49, Machine6:242},{date:"20181027", Machine1:49, Machine2:15, Machine3:31, Machine4:40, Machine5:67, Machine6:156},{date:"20181028", Machine1:36, Machine2:28, Machine3:31, Machine4:43, Machine5:65, Machine6:191},{date:"20181029", Machine1:36, Machine2:29, Machine3:32, Machine4:35, Machine5:65, Machine6:139},{date:"20181030", Machine1:25, Machine2:29, Machine3:27, Machine4:33, Machine5:68, Machine6:70},{date:"20181031", Machine1:25, Machine2:28, Machine3:26, Machine4:39, Machine5:60, Machine6:139},{date:"20181101", Machine1:16, Machine2:27, Machine3:36, Machine4:43, Machine5:54, Machine6:70},{date:"20181102", Machine1:16, Machine2:43, Machine3:32, Machine4:39, Machine5:68, Machine6:175},{date:"20181103", Machine1:16, Machine2:27, Machine3:39, Machine4:41, Machine5:72, Machine6:123},{date:"20181104", Machine1:9, Machine2:50, Machine3:29, Machine4:42, Machine5:67, Machine6:281},{date:"20181105", Machine1:9, Machine2:18, Machine3:33, Machine4:44, Machine5:74, Machine6:176},{date:"20181106", Machine1:4, Machine2:24, Machine3:38, Machine4:43, Machine5:69, Machine6:141},{date:"20181107", Machine1:4, Machine2:27, Machine3:27, Machine4:40, Machine5:67, Machine6:212},{date:"20181108", Machine1:1, Machine2:20, Machine3:31, Machine4:37, Machine5:69, Machine6:230},{date:"20181109", Machine1:1, Machine2:30, Machine3:36, Machine4:46, Machine5:59, Machine6:248},{date:"20181110", Machine1:0, Machine2:30, Machine3:32, Machine4:42, Machine5:58, Machine6:248},{date:"20181111", Machine1:0, Machine2:23, Machine3:35, Machine4:34, Machine5:62, Machine6:142},{date:"20181112", Machine1:1, Machine2:34, Machine3:31, Machine4:37, Machine5:58, Machine6:213},{date:"20181113", Machine1:1, Machine2:24, Machine3:35, Machine4:33, Machine5:59, Machine6:178},{date:"20181114", Machine1:4, Machine2:34, Machine3:17, Machine4:40, Machine5:55, Machine6:178},{date:"20181115", Machine1:4, Machine2:42, Machine3:35, Machine4:41, Machine5:53, Machine6:89},{date:"20181116", Machine1:9, Machine2:57, Machine3:37, Machine4:40, Machine5:56, Machine6:197},{date:"20181117", Machine1:9, Machine2:18, Machine3:35, Machine4:35, Machine5:59, Machine6:143},{date:"20181118", Machine1:16, Machine2:41, Machine3:34, Machine4:39, Machine5:64, Machine6:179},{date:"20181119", Machine1:16, Machine2:27, Machine3:36, Machine4:41, Machine5:62, Machine6:162},{date:"20181120", Machine1:25, Machine2:18, Machine3:35, Machine4:30, Machine5:75, Machine6:252},{date:"20181121", Machine1:25, Machine2:32, Machine3:31, Machine4:40, Machine5:78, Machine6:180},{date:"20181122", Machine1:36, Machine2:5, Machine3:34, Machine4:38, Machine5:66, Machine6:217},{date:"20181123", Machine1:36, Machine2:15, Machine3:39, Machine4:36, Machine5:51, Machine6:217},{date:"20181124", Machine1:36, Machine2:37, Machine3:37, Machine4:41, Machine5:57, Machine6:109},{date:"20181125", Machine1:49, Machine2:16, Machine3:30, Machine4:39, Machine5:61, Machine6:236},{date:"20181126", Machine1:49, Machine2:13, Machine3:38, Machine4:40, Machine5:73, Machine6:200},{date:"20181127", Machine1:49, Machine2:39, Machine3:28, Machine4:47, Machine5:57, Machine6:237},{date:"20181128", Machine1:64, Machine2:26, Machine3:29, Machine4:37, Machine5:72, Machine6:128},{date:"20181129", Machine1:64, Machine2:28, Machine3:37, Machine4:36, Machine5:66, Machine6:91},{date:"20181130", Machine1:64, Machine2:23, Machine3:33, Machine4:45, Machine5:56, Machine6:183},{date:"20181201", Machine1:81, Machine2:15, Machine3:39, Machine4:38, Machine5:55, Machine6:110},{date:"20181202", Machine1:81, Machine2:26, Machine3:31, Machine4:40, Machine5:48, Machine6:183},{date:"20181203", Machine1:81, Machine2:23, Machine3:33, Machine4:36, Machine5:58, Machine6:220},{date:"20181204", Machine1:81, Machine2:39, Machine3:36, Machine4:32, Machine5:68, Machine6:202},{date:"20181205", Machine1:81, Machine2:29, Machine3:33, Machine4:37, Machine5:56, Machine6:129},{date:"20181206", Machine1:100, Machine2:20, Machine3:40, Machine4:39, Machine5:70, Machine6:166},{date:"20181207", Machine1:100, Machine2:24, Machine3:21, Machine4:45, Machine5:70, Machine6:277},{date:"20181208", Machine1:100, Machine2:34, Machine3:38, Machine4:48, Machine5:56, Machine6:166},{date:"20181209", Machine1:100, Machine2:20, Machine3:35, Machine4:44, Machine5:59, Machine6:167},{date:"20181210", Machine1:100, Machine2:23, Machine3:37, Machine4:35, Machine5:60, Machine6:185},{date:"20181211", Machine1:100, Machine2:29, Machine3:33, Machine4:35, Machine5:55, Machine6:204},{date:"20181212", Machine1:100, Machine2:18, Machine3:34, Machine4:34, Machine5:75, Machine6:149},{date:"20181213", Machine1:100, Machine2:23, Machine3:37, Machine4:35, Machine5:63, Machine6:279},{date:"20181214", Machine1:100, Machine2:27, Machine3:27, Machine4:36, Machine5:55, Machine6:261},{date:"20181215", Machine1:100, Machine2:37, Machine3:29, Machine4:36, Machine5:62, Machine6:224},{date:"20181216", Machine1:100, Machine2:1, Machine3:28, Machine4:44, Machine5:49, Machine6:224},{date:"20181217", Machine1:100, Machine2:31, Machine3:32, Machine4:35, Machine5:48, Machine6:187},{date:"20181218", Machine1:81, Machine2:17, Machine3:37, Machine4:40, Machine5:78, Machine6:113},{date:"20181219", Machine1:81, Machine2:42, Machine3:33, Machine4:45, Machine5:55, Machine6:132},{date:"20181220", Machine1:81, Machine2:39, Machine3:36, Machine4:45, Machine5:61, Machine6:151},{date:"20181221", Machine1:81, Machine2:28, Machine3:31, Machine4:34, Machine5:56, Machine6:283},{date:"20181222", Machine1:81, Machine2:30, Machine3:33, Machine4:33, Machine5:56, Machine6:208},{date:"20181223", Machine1:64, Machine2:27, Machine3:29, Machine4:47, Machine5:45, Machine6:208},{date:"20181224", Machine1:64, Machine2:30, Machine3:27, Machine4:46, Machine5:75, Machine6:189},{date:"20181225", Machine1:64, Machine2:48, Machine3:33, Machine4:47, Machine5:66, Machine6:152},{date:"20181226", Machine1:64, Machine2:22, Machine3:24, Machine4:44, Machine5:58, Machine6:228},{date:"20181227", Machine1:49, Machine2:40, Machine3:34, Machine4:31, Machine5:79, Machine6:114},{date:"20181228", Machine1:49, Machine2:24, Machine3:36, Machine4:37, Machine5:54, Machine6:342},{date:"20181229", Machine1:36, Machine2:40, Machine3:33, Machine4:37, Machine5:51, Machine6:152},{date:"20181230", Machine1:36, Machine2:34, Machine3:33, Machine4:46, Machine5:69, Machine6:248},{date:"20181231", Machine1:36, Machine2:33, Machine3:35, Machine4:41, Machine5:63, Machine6:229},{date:"20190101", Machine1:25, Machine2:33, Machine3:37, Machine4:40, Machine5:56, Machine6:115}];


const data_product =[{date:"20180101", Product1:0, Product2:18, Product3:3, Product4:70, Product5:7},{date:"20180102", Product1:0, Product2:17, Product3:7, Product4:58, Product5:14},{date:"20180103", Product1:1, Product2:18, Product3:11, Product4:65, Product5:8},{date:"20180104", Product1:1, Product2:15, Product3:15, Product4:69, Product5:14},{date:"20180105", Product1:1, Product2:7, Product3:16, Product4:52, Product5:11},{date:"20180106", Product1:1, Product2:11, Product3:19, Product4:58, Product5:7},{date:"20180107", Product1:4, Product2:16, Product3:22, Product4:72, Product5:13},{date:"20180108", Product1:4, Product2:12, Product3:25, Product4:56, Product5:7},{date:"20180109", Product1:4, Product2:12, Product3:28, Product4:49, Product5:11},{date:"20180110", Product1:4, Product2:12, Product3:22, Product4:59, Product5:8},{date:"20180111", Product1:9, Product2:6, Product3:31, Product4:66, Product5:12},{date:"20180112", Product1:9, Product2:14, Product3:27, Product4:57, Product5:17},{date:"20180113", Product1:9, Product2:13, Product3:34, Product4:54, Product5:9},{date:"20180114", Product1:9, Product2:12, Product3:31, Product4:61, Product5:9},{date:"20180115", Product1:16, Product2:12, Product3:32, Product4:57, Product5:7},{date:"20180116", Product1:16, Product2:4, Product3:30, Product4:50, Product5:13},{date:"20180117", Product1:16, Product2:9, Product3:32, Product4:62, Product5:11},{date:"20180118", Product1:16, Product2:21, Product3:37, Product4:62, Product5:10},{date:"20180119", Product1:25, Product2:19, Product3:37, Product4:61, Product5:8},{date:"20180120", Product1:25, Product2:7, Product3:31, Product4:57, Product5:12},{date:"20180121", Product1:25, Product2:11, Product3:31, Product4:63, Product5:10},{date:"20180122", Product1:25, Product2:10, Product3:27, Product4:56, Product5:7},{date:"20180123", Product1:25, Product2:14, Product3:25, Product4:57, Product5:8},{date:"20180124", Product1:36, Product2:11, Product3:27, Product4:56, Product5:7},{date:"20180125", Product1:36, Product2:11, Product3:16, Product4:60, Product5:11},{date:"20180126", Product1:36, Product2:15, Product3:18, Product4:67, Product5:8},{date:"20180127", Product1:36, Product2:16, Product3:10, Product4:59, Product5:12},{date:"20180128", Product1:36, Product2:12, Product3:11, Product4:68, Product5:11},{date:"20180129", Product1:49, Product2:12, Product3:7, Product4:64, Product5:13},{date:"20180130", Product1:49, Product2:7, Product3:5, Product4:67, Product5:10},{date:"20180131", Product1:49, Product2:10, Product3:1, Product4:72, Product5:11},{date:"20180201", Product1:49, Product2:5, Product3:2, Product4:66, Product5:9},{date:"20180202", Product1:49, Product2:11, Product3:4, Product4:56, Product5:12},{date:"20180203", Product1:64, Product2:13, Product3:9, Product4:63, Product5:8},{date:"20180204", Product1:64, Product2:12, Product3:13, Product4:58, Product5:12},{date:"20180205", Product1:64, Product2:11, Product3:16, Product4:62, Product5:8},{date:"20180206", Product1:64, Product2:9, Product3:21, Product4:57, Product5:11},{date:"20180207", Product1:64, Product2:14, Product3:22, Product4:62, Product5:16},{date:"20180208", Product1:64, Product2:15, Product3:21, Product4:51, Product5:9},{date:"20180209", Product1:64, Product2:13, Product3:24, Product4:51, Product5:13},{date:"20180210", Product1:81, Product2:11, Product3:30, Product4:67, Product5:8},{date:"20180211", Product1:81, Product2:7, Product3:29, Product4:62, Product5:6},{date:"20180212", Product1:81, Product2:20, Product3:36, Product4:57, Product5:13},{date:"20180213", Product1:81, Product2:17, Product3:34, Product4:58, Product5:12},{date:"20180214", Product1:81, Product2:13, Product3:34, Product4:71, Product5:6},{date:"20180215", Product1:81, Product2:15, Product3:34, Product4:55, Product5:16},{date:"20180216", Product1:81, Product2:7, Product3:35, Product4:55, Product5:9},{date:"20180217", Product1:81, Product2:11, Product3:37, Product4:55, Product5:12},{date:"20180218", Product1:81, Product2:12, Product3:24, Product4:62, Product5:8},{date:"20180219", Product1:81, Product2:9, Product3:35, Product4:59, Product5:12},{date:"20180220", Product1:100, Product2:17, Product3:27, Product4:68, Product5:14},{date:"20180221", Product1:100, Product2:8, Product3:32, Product4:48, Product5:7},{date:"20180222", Product1:100, Product2:13, Product3:31, Product4:59, Product5:8},{date:"20180223", Product1:100, Product2:14, Product3:25, Product4:48, Product5:9},{date:"20180224", Product1:100, Product2:16, Product3:25, Product4:61, Product5:14},{date:"20180225", Product1:100, Product2:15, Product3:20, Product4:57, Product5:15},{date:"20180226", Product1:100, Product2:13, Product3:18, Product4:61, Product5:8},{date:"20180227", Product1:100, Product2:16, Product3:17, Product4:59, Product5:13},{date:"20180228", Product1:100, Product2:14, Product3:12, Product4:56, Product5:11},{date:"20180301", Product1:100, Product2:17, Product3:10, Product4:56, Product5:10},{date:"20180302", Product1:100, Product2:9, Product3:7, Product4:57, Product5:7},{date:"20180303", Product1:100, Product2:12, Product3:3, Product4:63, Product5:6},{date:"20180304", Product1:100, Product2:12, Product3:1, Product4:62, Product5:5},{date:"20180305", Product1:100, Product2:7, Product3:3, Product4:57, Product5:5},{date:"20180306", Product1:100, Product2:8, Product3:7, Product4:57, Product5:5},{date:"20180307", Product1:100, Product2:15, Product3:12, Product4:66, Product5:6},{date:"20180308", Product1:100, Product2:11, Product3:14, Product4:60, Product5:7},{date:"20180309", Product1:100, Product2:17, Product3:18, Product4:55, Product5:10},{date:"20180310", Product1:100, Product2:15, Product3:20, Product4:53, Product5:9},{date:"20180311", Product1:100, Product2:12, Product3:23, Product4:58, Product5:11},{date:"20180312", Product1:100, Product2:16, Product3:25, Product4:58, Product5:13},{date:"20180313", Product1:100, Product2:16, Product3:32, Product4:61, Product5:9},{date:"20180314", Product1:100, Product2:7, Product3:28, Product4:55, Product5:11},{date:"20180315", Product1:100, Product2:17, Product3:35, Product4:55, Product5:14},{date:"20180316", Product1:100, Product2:9, Product3:31, Product4:50, Product5:14},{date:"20180317", Product1:81, Product2:17, Product3:29, Product4:67, Product5:9},{date:"20180318", Product1:81, Product2:16, Product3:28, Product4:66, Product5:10},{date:"20180319", Product1:81, Product2:7, Product3:25, Product4:60, Product5:4},{date:"20180320", Product1:81, Product2:13, Product3:33, Product4:63, Product5:9},{date:"20180321", Product1:81, Product2:20, Product3:34, Product4:70, Product5:12},{date:"20180322", Product1:81, Product2:10, Product3:34, Product4:54, Product5:7},{date:"20180323", Product1:81, Product2:12, Product3:35, Product4:69, Product5:8},{date:"20180324", Product1:81, Product2:18, Product3:30, Product4:73, Product5:12},{date:"20180325", Product1:81, Product2:18, Product3:26, Product4:58, Product5:10},{date:"20180326", Product1:81, Product2:13, Product3:28, Product4:57, Product5:10},{date:"20180327", Product1:64, Product2:12, Product3:23, Product4:60, Product5:8},{date:"20180328", Product1:64, Product2:14, Product3:24, Product4:65, Product5:12},{date:"20180329", Product1:64, Product2:9, Product3:18, Product4:59, Product5:15},{date:"20180330", Product1:64, Product2:18, Product3:18, Product4:63, Product5:10},{date:"20180331", Product1:64, Product2:19, Product3:15, Product4:69, Product5:12},{date:"20180401", Product1:64, Product2:21, Product3:11, Product4:66, Product5:7},{date:"20180402", Product1:49, Product2:11, Product3:7, Product4:59, Product5:7},{date:"20180403", Product1:49, Product2:15, Product3:4, Product4:61, Product5:5},{date:"20180404", Product1:49, Product2:12, Product3:1, Product4:61, Product5:10},{date:"20180405", Product1:49, Product2:16, Product3:3, Product4:56, Product5:16},{date:"20180406", Product1:49, Product2:17, Product3:6, Product4:57, Product5:4},{date:"20180407", Product1:49, Product2:17, Product3:11, Product4:56, Product5:4},{date:"20180408", Product1:36, Product2:10, Product3:13, Product4:66, Product5:11},{date:"20180409", Product1:36, Product2:10, Product3:17, Product4:53, Product5:13},{date:"20180410", Product1:36, Product2:11, Product3:21, Product4:44, Product5:10},{date:"20180411", Product1:36, Product2:10, Product3:23, Product4:59, Product5:13},{date:"20180412", Product1:36, Product2:10, Product3:19, Product4:54, Product5:9},{date:"20180413", Product1:25, Product2:17, Product3:19, Product4:58, Product5:8},{date:"20180414", Product1:25, Product2:14, Product3:25, Product4:51, Product5:13},{date:"20180415", Product1:25, Product2:3, Product3:34, Product4:66, Product5:10},{date:"20180416", Product1:25, Product2:6, Product3:33, Product4:62, Product5:6},{date:"20180417", Product1:16, Product2:10, Product3:31, Product4:53, Product5:10},{date:"20180418", Product1:16, Product2:19, Product3:32, Product4:60, Product5:7},{date:"20180419", Product1:16, Product2:9, Product3:30, Product4:66, Product5:8},{date:"20180420", Product1:16, Product2:8, Product3:31, Product4:62, Product5:17},{date:"20180421", Product1:16, Product2:10, Product3:38, Product4:55, Product5:8},{date:"20180422", Product1:9, Product2:13, Product3:36, Product4:58, Product5:13},{date:"20180423", Product1:9, Product2:15, Product3:33, Product4:51, Product5:12},{date:"20180424", Product1:9, Product2:12, Product3:31, Product4:52, Product5:12},{date:"20180425", Product1:9, Product2:9, Product3:31, Product4:71, Product5:10},{date:"20180426", Product1:4, Product2:8, Product3:30, Product4:65, Product5:17},{date:"20180427", Product1:4, Product2:6, Product3:28, Product4:58, Product5:11},{date:"20180428", Product1:4, Product2:16, Product3:23, Product4:55, Product5:12},{date:"20180429", Product1:4, Product2:16, Product3:18, Product4:58, Product5:13},{date:"20180430", Product1:1, Product2:10, Product3:18, Product4:57, Product5:8},{date:"20180501", Product1:1, Product2:15, Product3:14, Product4:71, Product5:9},{date:"20180502", Product1:1, Product2:11, Product3:13, Product4:57, Product5:6},{date:"20180503", Product1:1, Product2:12, Product3:8, Product4:60, Product5:12},{date:"20180504", Product1:0, Product2:10, Product3:5, Product4:57, Product5:9},{date:"20180505", Product1:0, Product2:10, Product3:2, Product4:58, Product5:13},{date:"20180506", Product1:0, Product2:8, Product3:1, Product4:60, Product5:11},{date:"20180507", Product1:0, Product2:8, Product3:5, Product4:57, Product5:9},{date:"20180508", Product1:1, Product2:8, Product3:8, Product4:58, Product5:10},{date:"20180509", Product1:1, Product2:19, Product3:11, Product4:55, Product5:14},{date:"20180510", Product1:1, Product2:6, Product3:15, Product4:68, Product5:6},{date:"20180511", Product1:1, Product2:10, Product3:18, Product4:57, Product5:12},{date:"20180512", Product1:4, Product2:7, Product3:20, Product4:56, Product5:5},{date:"20180513", Product1:4, Product2:11, Product3:21, Product4:65, Product5:12},{date:"20180514", Product1:4, Product2:13, Product3:23, Product4:57, Product5:9},{date:"20180515", Product1:4, Product2:10, Product3:26, Product4:59, Product5:8},{date:"20180516", Product1:9, Product2:11, Product3:30, Product4:60, Product5:9},{date:"20180517", Product1:9, Product2:12, Product3:31, Product4:57, Product5:11},{date:"20180518", Product1:9, Product2:10, Product3:27, Product4:64, Product5:15},{date:"20180519", Product1:9, Product2:13, Product3:35, Product4:59, Product5:13},{date:"20180520", Product1:16, Product2:12, Product3:29, Product4:73, Product5:6},{date:"20180521", Product1:16, Product2:9, Product3:33, Product4:63, Product5:9},{date:"20180522", Product1:16, Product2:11, Product3:21, Product4:60, Product5:7},{date:"20180523", Product1:16, Product2:10, Product3:37, Product4:60, Product5:4},{date:"20180524", Product1:16, Product2:13, Product3:35, Product4:72, Product5:12},{date:"20180525", Product1:25, Product2:13, Product3:31, Product4:58, Product5:5},{date:"20180526", Product1:25, Product2:6, Product3:29, Product4:50, Product5:10},{date:"20180527", Product1:25, Product2:11, Product3:24, Product4:47, Product5:11},{date:"20180528", Product1:25, Product2:10, Product3:23, Product4:68, Product5:13},{date:"20180529", Product1:36, Product2:13, Product3:25, Product4:65, Product5:12},{date:"20180530", Product1:36, Product2:10, Product3:24, Product4:71, Product5:9},{date:"20180531", Product1:36, Product2:15, Product3:22, Product4:58, Product5:6},{date:"20180601", Product1:36, Product2:14, Product3:17, Product4:57, Product5:12},{date:"20180602", Product1:36, Product2:11, Product3:13, Product4:62, Product5:14},{date:"20180603", Product1:49, Product2:11, Product3:11, Product4:52, Product5:13},{date:"20180604", Product1:49, Product2:18, Product3:7, Product4:51, Product5:6},{date:"20180605", Product1:49, Product2:8, Product3:4, Product4:54, Product5:8},{date:"20180606", Product1:49, Product2:11, Product3:0, Product4:49, Product5:14},{date:"20180607", Product1:49, Product2:10, Product3:3, Product4:58, Product5:11},{date:"20180608", Product1:49, Product2:16, Product3:6, Product4:61, Product5:10},{date:"20180609", Product1:64, Product2:14, Product3:9, Product4:55, Product5:11},{date:"20180610", Product1:64, Product2:8, Product3:12, Product4:59, Product5:12},{date:"20180611", Product1:64, Product2:9, Product3:15, Product4:71, Product5:10},{date:"20180612", Product1:64, Product2:6, Product3:19, Product4:52, Product5:11},{date:"20180613", Product1:64, Product2:10, Product3:21, Product4:62, Product5:9},{date:"20180614", Product1:64, Product2:12, Product3:25, Product4:46, Product5:11},{date:"20180615", Product1:64, Product2:12, Product3:25, Product4:64, Product5:16},{date:"20180616", Product1:81, Product2:14, Product3:25, Product4:60, Product5:5},{date:"20180617", Product1:81, Product2:11, Product3:31, Product4:67, Product5:13},{date:"20180618", Product1:81, Product2:7, Product3:21, Product4:62, Product5:8},{date:"20180619", Product1:81, Product2:7, Product3:34, Product4:61, Product5:13},{date:"20180620", Product1:81, Product2:11, Product3:31, Product4:59, Product5:14},{date:"20180621", Product1:81, Product2:18, Product3:32, Product4:51, Product5:8},{date:"20180622", Product1:81, Product2:8, Product3:35, Product4:49, Product5:10},{date:"20180623", Product1:81, Product2:11, Product3:35, Product4:57, Product5:12},{date:"20180624", Product1:81, Product2:11, Product3:36, Product4:59, Product5:8},{date:"20180625", Product1:100, Product2:13, Product3:26, Product4:62, Product5:11},{date:"20180626", Product1:100, Product2:17, Product3:29, Product4:53, Product5:7},{date:"20180627", Product1:100, Product2:16, Product3:27, Product4:50, Product5:11},{date:"20180628", Product1:100, Product2:5, Product3:30, Product4:61, Product5:15},{date:"20180629", Product1:100, Product2:16, Product3:19, Product4:70, Product5:10},{date:"20180630", Product1:100, Product2:22, Product3:24, Product4:45, Product5:7},{date:"20180701", Product1:100, Product2:16, Product3:21, Product4:68, Product5:14},{date:"20180702", Product1:100, Product2:12, Product3:17, Product4:60, Product5:9},{date:"20180703", Product1:100, Product2:8, Product3:15, Product4:55, Product5:11},{date:"20180704", Product1:100, Product2:16, Product3:11, Product4:60, Product5:13},{date:"20180705", Product1:100, Product2:9, Product3:7, Product4:59, Product5:9},{date:"20180706", Product1:100, Product2:12, Product3:6, Product4:66, Product5:8},{date:"20180707", Product1:100, Product2:16, Product3:2, Product4:62, Product5:9},{date:"20180708", Product1:100, Product2:13, Product3:2, Product4:61, Product5:8},{date:"20180709", Product1:100, Product2:14, Product3:5, Product4:48, Product5:8},{date:"20180710", Product1:100, Product2:13, Product3:9, Product4:72, Product5:13},{date:"20180711", Product1:100, Product2:6, Product3:12, Product4:59, Product5:12},{date:"20180712", Product1:100, Product2:14, Product3:15, Product4:55, Product5:10},{date:"20180713", Product1:100, Product2:9, Product3:16, Product4:57, Product5:10},{date:"20180714", Product1:100, Product2:17, Product3:22, Product4:69, Product5:6},{date:"20180715", Product1:100, Product2:12, Product3:25, Product4:49, Product5:12},{date:"20180716", Product1:100, Product2:15, Product3:27, Product4:62, Product5:10},{date:"20180717", Product1:100, Product2:6, Product3:29, Product4:58, Product5:6},{date:"20180718", Product1:100, Product2:8, Product3:30, Product4:63, Product5:7},{date:"20180719", Product1:100, Product2:5, Product3:33, Product4:67, Product5:12},{date:"20180720", Product1:100, Product2:12, Product3:30, Product4:60, Product5:11},{date:"20180721", Product1:81, Product2:15, Product3:32, Product4:64, Product5:11},{date:"20180722", Product1:81, Product2:11, Product3:36, Product4:62, Product5:12},{date:"20180723", Product1:81, Product2:8, Product3:38, Product4:52, Product5:12},{date:"20180724", Product1:81, Product2:15, Product3:35, Product4:69, Product5:13},{date:"20180725", Product1:81, Product2:16, Product3:27, Product4:57, Product5:6},{date:"20180726", Product1:81, Product2:10, Product3:36, Product4:63, Product5:7},{date:"20180727", Product1:81, Product2:10, Product3:33, Product4:63, Product5:10},{date:"20180728", Product1:81, Product2:16, Product3:28, Product4:53, Product5:10},{date:"20180729", Product1:81, Product2:9, Product3:28, Product4:58, Product5:10},{date:"20180730", Product1:64, Product2:14, Product3:20, Product4:56, Product5:11},{date:"20180731", Product1:64, Product2:11, Product3:28, Product4:67, Product5:9},{date:"20180801", Product1:64, Product2:8, Product3:22, Product4:61, Product5:13},{date:"20180802", Product1:64, Product2:10, Product3:16, Product4:62, Product5:10},{date:"20180803", Product1:64, Product2:10, Product3:19, Product4:60, Product5:10},{date:"20180804", Product1:64, Product2:11, Product3:14, Product4:55, Product5:9},{date:"20180805", Product1:64, Product2:12, Product3:8, Product4:52, Product5:7},{date:"20180806", Product1:49, Product2:13, Product3:6, Product4:67, Product5:12},{date:"20180807", Product1:49, Product2:8, Product3:2, Product4:68, Product5:7},{date:"20180808", Product1:49, Product2:3, Product3:0, Product4:51, Product5:7},{date:"20180809", Product1:49, Product2:14, Product3:3, Product4:61, Product5:9},{date:"20180810", Product1:49, Product2:9, Product3:7, Product4:59, Product5:9},{date:"20180811", Product1:49, Product2:14, Product3:11, Product4:62, Product5:8},{date:"20180812", Product1:36, Product2:16, Product3:15, Product4:71, Product5:13},{date:"20180813", Product1:36, Product2:15, Product3:17, Product4:65, Product5:8},{date:"20180814", Product1:36, Product2:18, Product3:17, Product4:58, Product5:10},{date:"20180815", Product1:36, Product2:13, Product3:21, Product4:60, Product5:6},{date:"20180816", Product1:36, Product2:14, Product3:24, Product4:63, Product5:6},{date:"20180817", Product1:25, Product2:12, Product3:29, Product4:62, Product5:8},{date:"20180818", Product1:25, Product2:14, Product3:31, Product4:62, Product5:12},{date:"20180819", Product1:25, Product2:10, Product3:33, Product4:63, Product5:7},{date:"20180820", Product1:25, Product2:14, Product3:35, Product4:57, Product5:12},{date:"20180821", Product1:16, Product2:9, Product3:25, Product4:58, Product5:8},{date:"20180822", Product1:16, Product2:18, Product3:33, Product4:60, Product5:10},{date:"20180823", Product1:16, Product2:16, Product3:35, Product4:49, Product5:6},{date:"20180824", Product1:16, Product2:19, Product3:34, Product4:63, Product5:11},{date:"20180825", Product1:16, Product2:13, Product3:36, Product4:59, Product5:10},{date:"20180826", Product1:9, Product2:12, Product3:35, Product4:74, Product5:13},{date:"20180827", Product1:9, Product2:9, Product3:30, Product4:62, Product5:7},{date:"20180828", Product1:9, Product2:8, Product3:27, Product4:56, Product5:9},{date:"20180829", Product1:9, Product2:8, Product3:32, Product4:57, Product5:10},{date:"20180830", Product1:4, Product2:13, Product3:26, Product4:53, Product5:9},{date:"20180831", Product1:4, Product2:22, Product3:26, Product4:59, Product5:10},{date:"20180901", Product1:4, Product2:11, Product3:16, Product4:77, Product5:6},{date:"20180902", Product1:4, Product2:12, Product3:18, Product4:55, Product5:18},{date:"20180903", Product1:1, Product2:8, Product3:20, Product4:52, Product5:12},{date:"20180904", Product1:1, Product2:4, Product3:16, Product4:68, Product5:12},{date:"20180905", Product1:1, Product2:10, Product3:10, Product4:63, Product5:11},{date:"20180906", Product1:1, Product2:4, Product3:8, Product4:63, Product5:10},{date:"20180907", Product1:0, Product2:9, Product3:3, Product4:51, Product5:8},{date:"20180908", Product1:0, Product2:13, Product3:1, Product4:57, Product5:10},{date:"20180909", Product1:0, Product2:9, Product3:2, Product4:56, Product5:6},{date:"20180910", Product1:0, Product2:7, Product3:6, Product4:70, Product5:11},{date:"20180911", Product1:1, Product2:14, Product3:10, Product4:51, Product5:10},{date:"20180912", Product1:1, Product2:15, Product3:13, Product4:48, Product5:16},{date:"20180913", Product1:1, Product2:11, Product3:15, Product4:54, Product5:7},{date:"20180914", Product1:1, Product2:6, Product3:19, Product4:62, Product5:17},{date:"20180915", Product1:4, Product2:13, Product3:19, Product4:57, Product5:5},{date:"20180916", Product1:4, Product2:10, Product3:25, Product4:69, Product5:18},{date:"20180917", Product1:4, Product2:16, Product3:27, Product4:60, Product5:14},{date:"20180918", Product1:4, Product2:9, Product3:29, Product4:53, Product5:10},{date:"20180919", Product1:9, Product2:14, Product3:23, Product4:55, Product5:12},{date:"20180920", Product1:9, Product2:13, Product3:34, Product4:56, Product5:10},{date:"20180921", Product1:9, Product2:16, Product3:29, Product4:66, Product5:10},{date:"20180922", Product1:9, Product2:19, Product3:34, Product4:59, Product5:15},{date:"20180923", Product1:16, Product2:20, Product3:37, Product4:65, Product5:8},{date:"20180924", Product1:16, Product2:12, Product3:34, Product4:65, Product5:5},{date:"20180925", Product1:16, Product2:6, Product3:37, Product4:52, Product5:8},{date:"20180926", Product1:16, Product2:11, Product3:37, Product4:68, Product5:8},{date:"20180927", Product1:25, Product2:9, Product3:31, Product4:57, Product5:14},{date:"20180928", Product1:25, Product2:7, Product3:30, Product4:63, Product5:17},{date:"20180929", Product1:25, Product2:12, Product3:26, Product4:61, Product5:10},{date:"20180930", Product1:25, Product2:14, Product3:24, Product4:60, Product5:7},{date:"20181001", Product1:25, Product2:12, Product3:28, Product4:47, Product5:6}];


var keys_machine = [
 "Machine1","Machine2","Machine3","Machine4","Machine5","Machine6"
];
var keys_product = [
 "Product1","Product2","Product3","Product4","Product5"
];

//globals:
var paddingLeft = 40, paddingRight = 40, paddingTop = 10, paddingBottom = 30;
var width=1200, height=800;
var arbeitsplatz="";
var ausschussmenge="";
var dailyAusschuss="";
var tooltiptext="";

//Parse Date
var parseTime = d3.timeParse("%Y%m%d");
var formatTime = d3.timeFormat("%d.%m.%y");
var tooltipDate = d3.timeFormat("%d.%B %Y (%A)");

function barchart(data,arbeitsplatz,yScaleDetail,fill,keys){
  tooltip=d3.select(".tooltip");
  var lineGenerator = d3.line();
  var bars = [];
  var yTooltips=[];
  for (var j=0;j<data.length;j++){
    if (arbeitsplatz=="all"){
      var rowsum=1;
      for (var k in keys){
        rowsum+=data[j][keys[k]];
      }
      bars.push(rowsum);
    }
    else{
      bars.push(data2[j][arbeitsplatz]);
    }
  yTooltips.push(tooltipDate(data2[j].date));
  }
    
  document.getElementById("anlage_detail").innerHTML=arbeitsplatz;
  
  var barPadding = 1;
  var barWidth = ((width-paddingLeft-paddingRight) / bars.length);
  var maxbar=Math.max(...bars);

  bc=d3.select("#detail");
  bc.selectAll("rect")
      .remove();
  var barChart=bc.selectAll("rect")
    .data(bars)
    .enter()
    .append("rect")
    .style("fill",fill)
    .attr("y", function(d) {
      return yScaleDetail(d);
    })
    .attr("height", function(d) {
      return (height-yScaleDetail(d));
    })
    .attr("width", barWidth - barPadding)
    .attr("transform", function (d, i) {
       var translate = [paddingLeft+barWidth * (i-0.5), paddingTop];
       return "translate("+ translate +")";
    })
    .on("mouseover", function(d,i) {		
      tooltiptext=d+ "<br>" + yTooltips[i];
      tooltip.html(tooltiptext);
      tooltip.style("opacity", 0.8);
      tooltip.style("width", "240px");
      tooltip.style("height", "50px");
      
      })
    .on("mousemove", function(d,i) {		
      tooltip.style("left", (d3.event.pageX) + "px");
      tooltip.style("top", (d3.event.pageY - 50) + "px");
      })
    .on("mouseout", function(d) {	
      tooltip.style("opacity", 0);	
     });
}

function graph(grouping,data,keys){

  active_grouping=grouping;
  //cleanup;
  d3.select("#steamogr")
  .remove();
  d3.select("#detail")
  .remove();
  d3.select(".tooltip")
  .remove();
  
  d3.select("#steam_container")
  .append("svg")
  .attr("id","steamogr");
  d3.select("#barchart_container")
  .append("svg")
  .attr("id","detail");
 
  d3.select("#steamogr")
  .append("g")
  .attr("transform","translate(0, 400)");
  
  var tooltip = d3.select("body")
    .append("div")	
    .attr("class", "tooltip");
  
  //DATA WRANGLING
  
  
  data.forEach(function(d) {
   d.date2 = parseTime(d.date);
  });
  
  //Anpassung Monat
  //--------
  
  var nest = d3.nest()
    .key(function (d) {
      if (grouping=="week"){
        return d3.timeWeek(new Date(d.date2));
      }
      else if (grouping=="month"){
        return d3.timeMonth(new Date(d.date2));
      }
      else return d3.timeDay(new Date(d.date2));
    })
    .rollup(function(leaves) { 
     arr={};
     for (k in keys){
      arr[keys[k]]= d3.sum(leaves, function(d) {return parseFloat(d[keys[k]]);});
     }
     return (arr);
    })
    .entries(data);
  
  data=nest;
  
  data.forEach(function(d) {
   d.date = new Date(d.key);
  });
  //add property date, which just converts key from string to date;
  
  //daily sums
  dailySum=[];
  
  for (var i=0; i<data.length; i++){
   var rowsum=0;
   for (key in data[i].value){
    rowsum+=data[i].value[key];
    }
   dailySum.push(rowsum);
  }
  
  var yDomainMax=Math.max(...dailySum); //ukol: zjistit pomoci funkce
  
  
  var yScale = d3.scaleLinear()
          .domain([0, yDomainMax])
          .range([0,height/1.3]);
  
  var yScaleDetail = d3.scaleLinear()
          .domain([0, yDomainMax])
          .range([height,0]);
  
  var xIndexScale = d3.scaleLinear()
   .range([0, data.length])
   .domain([paddingLeft,width-paddingRight]);
  
  var xScale = d3.scaleTime()
   .range([paddingLeft,width-paddingRight])
   .domain(d3.extent(data, function(d) {return d.date;}));
  
  
  var colorrange = ["#a6cee3",
  "#1f78b4",
  "#b2df8a",
  "#33a02c",
  "#fb9a99",
  "#e31a1c",
  "#fdbf6f",
  "#ff7f00",
  "#cab2d6",
  "#6a3d9a",
  "#ffff99",
  "#b15928"];//http://colorbrewer2.org/#type=qualitative&scheme=Paired&n=12
  
  
  var colorScale = d3.scaleOrdinal()
   .domain(keys)
   .range(colorrange);
  
  //Area Generator
  var areaGenerator = d3.area()
   .x(function(d, i) {
    return xScale(d.data.date);
   })
   .y0(function(d) {
    return yScale(d[0]);
   }) //baseline of area
   .y1(function(d) {
    return yScale(d[1]);
   })//topline of area
   .curve(d3.curveStepBefore);
  //.curve(d3.curveCatmullRom);//interpolation
  
   var chkBox = document.getElementById('smoothing');
    if (chkBox.checked)
    {
       areaGenerator.curve(d3.curveCatmullRom);
    }
  
  //Stack
  var stack = d3.stack()
   .keys(keys)
   .order(d3.stackOrderInsideOut)
   //.offset(d3.stackOffsetWiggle);
   .offset(d3.stackOffsetSilhouette);
   //.offset(d3.stackOffsetNone);
  
  //flatten data, so they can be used by stack;
  data2=[];
  for(i in data){
   row=data[i].value;
   //row.date=data[i].date;
   row={...{date: data[i].date},...row};
   data2.push(row);
  }

  var stackedSeries = stack(data2);

  
  //Graph
  
  d3.select('#steamogr')
   .attr('width', "100%")
   .attr('height', "auto")
   .attr("viewBox","0 0 1200 800");
  
  d3.select('#detail')
   .attr('width', "100%")
   .attr('height', "auto")
   .attr("viewBox","0 0 1200 950");
  
  
  
  barchart(data2,"all",yScaleDetail,"#333333",keys);
  
  var steam=d3.select("#steamogr").select("g")
   .selectAll("path")
   .data(stackedSeries)
   .enter() //no path in html, therefore new path generated
   .append("path")
   .style("fill", function(d, i) {
    return colorScale(d);
   })
   .attr("id", function(d,i){
    return i;
   })
   .attr("class","layer")
   .attr("d", areaGenerator)
  //TOOLTIPS http://bl.ocks.org/d3noob/a22c42db65eb00d4e369 
  //misto nuly tam musi byt neco jineho dle pozice kurzoru na ose x - prepocet dle xScale
   .on("mouseover", function(d,i) {		
        arbeitsplatz=Object.keys(d[0].data)[i+1];
        tooltip.style("opacity", 0.8);
        tooltip.style("height", "70px");  
        tooltip.style("width", "240px");
        })			
   .on("mouseout", function(d) {	
        tooltip.style("opacity", 0);	
   })
   .on("mousemove", function(d){
       mousex = d3.mouse(this)[0];//x coordinate mouse position
       xindex=Math.round(xIndexScale(mousex));
       ausschussmenge=d[xindex].data[arbeitsplatz];
       dailyAusschuss=dailySum[xindex];
       tooltiptext=arbeitsplatz+ "<br/>"+ tooltipDate(d[xindex].data.date) +"<br>"+ ausschussmenge+ "<br/>"+ dailyAusschuss+" (total)";
       tooltip.html(tooltiptext);
       tooltip.style("opacity", 0.8);
       tooltip.style("left", (d3.event.pageX) + "px");
       tooltip.style("top", (d3.event.pageY - 70) + "px");
   })
   .on("click", function(d,i) {
      barchart(data2,arbeitsplatz,yScaleDetail,this.style.fill,keys);
      }
    )
  .on("dblclick", function(d,i) {
      barchart(data2,"all",yScaleDetail,"#333333",keys);
      })
      ;
  
  //AXES: https://bl.ocks.org/d3noob/23e42c8f67210ac6c678db2cd07a747e
  var xAxis = d3.axisBottom(xScale); 
  var yAxis = d3.axisRight(yScale); 
  
  d3.select("#steamogr")
   .append("g")
   .attr("class", "x axis")
   .attr("height",height)
   .attr("transform", "translate(0," + (height - paddingBottom) + ")")
   .call(xAxis);
  
  d3.select("#steamogr")
   .append("g")
   .attr("class", "y axis")
   .attr("height",height)
   .attr("transform", "translate(" + (width-paddingRight) + ","+(paddingTop)+")")
   .call(yAxis);
  
  var yAxisDetail = d3.axisRight(yScaleDetail);
  
  d3.select("#detail")
   .append("g")
   .attr("class", "y axis")
   .attr("height",height)
   .attr("transform", "translate(" + (width-paddingRight) + ","+(paddingTop)+")")
   .call(yAxisDetail);
  
  d3.select("#detail")
   .append("g")
   .attr("class", "x axis")
   .attr("height",height)
   .attr("transform", "translate(0," + (height+paddingTop+10) + ")")
   .call(xAxis);
};

active_data=data_machine;
active_keys=keys_machine;
active_grouping="week";

function setData(tab){
  if (tab=="machine"){
    d3.select("#machine_switch")
      .classed("active",true);
    d3.select("#product_switch")
      .classed("active",false); 
    active_data=data_machine;
    active_keys=keys_machine;
  }
  else{
    d3.select("#machine_switch")
      .classed("active",false);
    d3.select("#product_switch")
      .classed("active",true);
    active_data=data_product;
    active_keys=keys_product;
  }  
  
  graph(active_grouping,active_data,active_keys);
  daily(tab);
}




//---------


data_today={"Auftrag":["1648124","1648188","1648285","1647503","1648124","1648283","1648617","1648194","1648281","1648188","1648194","1648833","1648282","1647445","1648286","1648719","1647445","1648623","1648202","1648626","1647240","1648728","1648618","1648284","1648195","1647810","1649035","1648196","1649036","1648625","1649037","1648673","1648624","1648674","1649003","1648725","1647810","1647137","1648619","1647811","1647189","1648727","1647135","1646945","1647806","1648181","1648615","1648281","1647809","1647806","1647812","1648658","1649070","1648922","1648478","1649002","1649003","1649036","1649035","1648672","1648726","1648192","1648863","1648192","1648654","1648732","1648735","1648724","1647693","1648279","1648577","1649075","1648202","1648283","1649068","1648296","1648478","1648802","1648682","1648436","1648487","1648715","1647924","1648682","1649073","1649065","1649051","1649070","1649076","1649100","1649067","1648863","1649030","1647187","1648655","1648620","1648655","1649061","1649066"],"Datum":["20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215","20181215"],"Count":[40,25,25,21,20,19,18,15,15,13,13,12,12,11,11,9,8,8,7,7,7,6,6,6,6,6,6,5,5,5,5,5,5,5,4,4,4,4,4,4,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"machine":["Machine 1","Machine 2","Machine 3","Machine 4","Machine 1","Machine 3","Machine 3","Machine 5","Machine 3","Machine 4","Machine 1","Machine 6","Machine 3","Machine 4","Machine 3","Machine 6","Machine 4","Machine 7","Machine 8","Machine 7","Machine 9","Machine 11","Machine 3","Machine 3","Machine 1","Machine 4","Machine 7","Machine 1","Machine 7","Machine 7","Machine 7","Machine 9","Machine 7","Machine 9","Machine 10","Machine 11","Machine 4","Machine 4","Machine 3","Machine 4","Machine 15","Machine 11","Machine 4","Machine 1","Machine 4","Machine 14","Machine 23","Machine 5","Machine 4","Machine 4","Machine 4","Machine 12","Machine 13","Machine 12","Machine 8","Machine 10","Machine 10","Machine 7","Machine 7","Machine 25","Machine 11","Machine 14","Machine 29","Machine 14","Machine 16","Machine 8","Machine 13","Machine 6","Machine 4","Machine 4","Machine 8","Machine 28","Machine 8","Machine 5","Machine 13","Machine 27","Machine 8","Machine 12","Machine 13","Machine 5","Machine 30","Machine 30","Machine 8","Machine 13","Machine 26","Machine 28","Machine 10","Machine 26","Machine 28","Machine 26","Machine 13","Machine 29","Machine 27","Machine 15","Machine 26","Machine 24","Machine 13","Machine 26","Machine 26"],"product":["Product 1","Product 2","Product 3","Product 1","Product 1","Product 3","Product 4","Product 5","Product 3","Product 2","Product 5","Product 4","Product 3","Product 4","Product 3","Product 14","Product 4","Product 4","Product 6","Product 4","Product 15","Product 16","Product 4","Product 3","Product 5","Product 4","Product 5","Product 5","Product 5","Product 4","Product 5","Product 2","Product 4","Product 2","Product 7","Product 8","Product 4","Product 11","Product 4","Product 4","Product 23","Product 8","Product 11","Product 12","Product 4","Product 19","Product 20","Product 3","Product 4","Product 4","Product 4","Product 9","Product 8","Product 9","Product 6","Product 7","Product 7","Product 5","Product 5","Product 2","Product 8","Product 21","Product 10","Product 17","Product 8","Product 10","Product 8","Product 14","Product 5","Product 3","Product 18","Product 7","Product 6","Product 3","Product 8","Product 13","Product 6","Product 9","Product 24","Product 22","Product 27","Product 30","Product 29","Product 24","Product 16","Product 25","Product 26","Product 8","Product 26","Product 10","Product 8","Product 10","Product 20","Product 23","Product 28","Product 4","Product 28","Product 28","Product 8"],"Problem":["Zerstoerende Pruefung","Fehlmenge","Pruefung Elektrisch","Verschmutzte Pads","Pruefung Elektrisch","Pruefung Elektrisch","Pruefung Elektrisch","Bruch_Risse","Pruefung Elektrisch","Mech_ Beschaedigung","Pruefung Elektrisch","Ausschuss Bonden","Pruefung Elektrisch","Bruch_Risse","Pruefung Elektrisch","Ausschuss Dispensen","Verschmutzte Pads","Zerstoerende Pruefung","Pruefung Elektrisch","Zerstoerende Pruefung","Zerstoerende Pruefung","Ausschuss Dispensen","Pruefung Elektrisch","Pruefung Elektrisch","Pruefung Elektrisch","Verschmutzte Pads","Zerstoerende Pruefung","Pruefung Elektrisch","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Ausschuss Bonden","Ausschuss Dispensen","Bruch_Risse","Bruch_Risse","Pruefung Elektrisch","Verschmutzte Pads","Ausschuss Bonden","Ausschuss Dispensen","Bruch_Risse","Pruefung Elektrisch","Verschmutzte Pads","Ausschuss Bonden","Ausschuss Dispensen","Bruch_Risse","Bruch_Risse","Bruch_Risse","Bruch_Risse","Mech_ Beschaedigung","Mech_ Beschaedigung","Pruefung Elektrisch","Pruefung Elektrisch","Zerstoerende Pruefung","Zerstoerende Pruefung","Ausschuss Bonden","Ausschuss Bonden","Ausschuss Bonden","Ausschuss Dispensen","Ausschuss Dispensen","Ausschuss Dispensen","Ausschuss Dispensen","Ausschuss Dispensen","Ausschuss Dispensen","Ausschuss Dispensen","Ausschuss Loeten","Bruch_Risse","Bruch_Risse","Fehlmenge","Mech_ Beschaedigung","Mech_ Beschaedigung","Mech_ Beschaedigung","Mech_ Beschaedigung","Mech_ Beschaedigung","Mech_ Beschaedigung","Mech_ Beschaedigung","Mech_ Beschaedigung","Pruefung Elektrisch","Pruefung Elektrisch","Pruefung Undicht","Pruefung Undicht","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung","Zerstoerende Pruefung"]};

console.log("data_today:")
console.log(data_today);

function daily(klic){

    d3.select("#daily")
  .remove();
  
d3.select("#daily_container")
  .append("svg")
  .attr("id","daily");
  
d3.select('#daily')
   .attr('width', "100%")
   .attr('height', "auto")
   .attr("viewBox","0 0 1200 800");

d3.select("#daily")
  .append("g")
  .attr("transform","translate(150, 0)");

//change from json with long arrays to json of single records
dataT=[];
for(i in data_today.Auftrag){
    dataT.push({"Auftrag":data_today.Auftrag[i],"machine":data_today.machine[i],"Problem":data_today.Problem[i],"product":data_today.product[i],"Count":data_today.Count[i]})
}
console.log("dataT transposed")
console.log(dataT);

//function that returns unique values from array
function onlyUnique(value, index, self) { 
    return self.indexOf(value) === index;
}

//group_by + summarise
var nest2 = d3.nest()
    .key(function(d) {return d[klic];})
    .key(function(d) {return d.Problem;})
    .rollup(function(leaves) { return {"total_count": d3.sum(leaves, function(d) {return parseFloat(d.Count);})} })
    .entries(dataT);

//arrange descending   
console.log("nest2 sorted");
sumvals=function(d){
    suma=0;
    for (i in d.values){
        suma=suma+ d.values[i].value.total_count;
    }
    return suma;
}
nest2.sort(function(a,b){
    return sumvals(b)-sumvals(a);});
console.log(nest2);


uniquex=data_today.Problem.filter(onlyUnique);

var stack2=d3.stack()
                .keys(uniquex);
                //.order(d3.StackOrderAscending);

flat2=[];
  for(i in nest2){
      row={product: nest2[i].key};
      for(j in nest2[i].values){
          prop=(nest2[i].values[j].key);
          cnt=(nest2[i].values[j].value.total_count);
          row[prop]=cnt;
   }
   flat2.push(row);
  };
  console.log("flat2:")
  console.log(flat2);

var stackedSeries2=stack2(flat2);
console.log("stackedSeries2");
console.log(stackedSeries2);

//get rid of NaN
for (i in stackedSeries2){
    c=0;
    for (j in stackedSeries2[i]){
        for (k in stackedSeries2[i][j]){
            if (isNaN(stackedSeries2[i][j][k])){
                stackedSeries2[i][j][k]=stackedSeries2[i][j][k-1];
            } 
        }
    }
}

var colors = ["#a6cee3",
  "#1f78b4",
  "#b2df8a",
  "#33a02c",
  "#fb9a99",
  "#e31a1c",
  "#fdbf6f",
  "#ff7f00",
  "#cab2d6",
  "#6a3d9a",
  "#ffff99",
  "#b15928"];


var merged = [].concat.apply([], stackedSeries2);
var merged = [].concat.apply([], merged);
var yDailyMax=Math.max(...merged);

var yScaleDaily = d3.scaleLinear()
          .domain([0, yDailyMax*1.1])
          .range([0,width-200]);

var gg = d3.select("#daily").select("g")
	.selectAll('g.series')
	.data(stackedSeries2)
	.enter()
	.append('g')
	.style('fill', function(d, i) {
		return colors[i];
	})
	.classed('series', true)
	.attr("name",function(d,i){
	    return uniquex[i];
	})		
   .on("mouseout", function(d) {	
        tooltip.style("opacity", 0);	
   })
   .on("mousemove", function(d,i) {		
      tooltip.style("left", (d3.event.pageX) + "px");
      tooltip.style("top", (d3.event.pageY - 50) + "px");
      })
   ;
gg.selectAll('rect')
	.data(function(d) {
		return d;
	})
	.enter()
	.append('rect')
	.on("mouseover", function(d,i) {
        tooltip.html(this.parentNode.getAttribute('name') +"<br>" + (d[1]-d[0]));
        tooltip.style("opacity", 0.8);
        tooltip.style("height", "30x");  
        tooltip.style("width", "240px");
        })	
	.attr('width', function(d) {
		return yScaleDaily(d[1] - d[0]);
	})
	.attr('x', function(d) {
		return yScaleDaily(d[0]);
	})
	.attr('y', function(d, i) {
		return i * 20+20;
	})
	.attr('height', 19);

d3.select("#daily").selectAll('text')
  .data(nest2)
  .enter()
  .append('text')
  .text(function(d,i){
      return d.key;
  })
  .attr('x', function(d, i) {
		return 0;
	})
  .attr('y', function(d, i) {
		return i * 20 + 38;
	})

var xAxisDaily = d3.axisBottom(yScaleDaily); 

d3.select("#daily")
   .append("g")
   .attr("class", "x axis")
   .attr("height",height)
   .attr("transform", "translate(150,0)")
   .call(xAxisDaily);
console.log(nest2);

// legend colors
var z = d3.scaleOrdinal()
    .range(colors);

z.domain(uniquex);

var legend = d3.select("#daily").append("g")
      .attr("font-family", "sans-serif")
      .attr("font-size", 10)
      .attr("text-anchor", "end")
    .selectAll("g")
    .data(uniquex.slice().reverse())
    .enter().append("g")
      .attr("transform", function(d, i) { return "translate(-10," + (i * 20+200) + ")"; });

  legend.append("rect")
      .attr("x", width - 19)
      .attr("width", 19)
      .attr("height", 19)
      .attr("fill", z);

  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9.5)
      .attr("dy", "0.32em")
      .text(function(d) { return d; });
      console.log(uniquex);
console.log("legend");
console.log(legend);

return nest2;
}

function smoothing(checkbox){
        graph(active_grouping,active_data,active_keys);
}
graph("week",active_data,active_keys);
daily("machine");